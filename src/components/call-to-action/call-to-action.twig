{#
 # Available Props:
 # - call_to_action__width: feature (default) or highlight
 # - call_to_action__position: image-left (default) or image-right
 # - call_to_action__focus: equal (default), image, or text
 #
 # Available variables:
 # - call_to_action__heading
 # - call_to_action__subheading (optional)
 # - call_to_action__text
 #
 # Available blocks:
 # - call_to_action__image
 #}

{% set call_to_action__base_class = 'call-to-action' %}

{% set call_to_action__attributes = {
  'data-component-theme': call_to_action__theme|default('white-bg'),
  'class': bem(call_to_action__base_class, call_to_action__modifiers, call_to_action__blockname)
} %}

{% if call_to_action__copyright %}
  {% set call_to_action__copyright_credit = '<p>' ~ call_to_action__copyright ~ '</p>'%}
{% endif %}

{% set text_content__image = call_to_action__caption ~ call_to_action__copyright_credit %}

<div {{ add_attributes(call_to_action__attributes) }}>
  {# Content #}
  <div {{ bem('content', [], call_to_action__base_class) }}>
    {# Text overline #}
    {% if call_to_action__overline %}
      {% include "@components/typography/text/text.twig" with {
        text__content: call_to_action__overline,
        text__blockname: call_to_action__base_class,
        text__base_class: 'overline',
      } %}
    {% endif %}
    {# Heading #}
    {% if call_to_action__heading %}
      {% include "@components/typography/heading/heading.twig" with {
        heading: call_to_action__heading,
        heading__level: '2',
        heading__blockname: call_to_action__base_class,
      } %}
    {% endif %}
    {# Text #}
    {% include "@components/typography/text/text.twig" with {
      text__content: call_to_action__text,
      text__blockname: call_to_action__base_class,
    } %}
    {# optional link #}
    {# Render the action button #}
      {% if call_to_action__button__text and call_to_action__button__url %}
        <div {{ bem('action', [call_to_action__variant], call_to_action__base_class) }}>
          {% include "@components/button/button.twig" with {
            button__content: call_to_action__button__text,
            button__style: 'primary',
            button__attributes: {
              'href': call_to_action__button__url,
            }
          } %}
        </div>
      {% endif %}
  </div>
</div>

